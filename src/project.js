window.__require=function t(e,i,n){function o(c,s){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!s&&h)return h(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}}var u=i[c]={exports:{}};e[c][0].call(u.exports,function(t){return o(e[c][1][t]||t)},u,u.exports,t,e,i,n)}return i[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({Blur:[function(t,e,i){"use strict";cc._RF.push(e,"bed501nUaZILLFxzZiZ+Iry","Blur");var n=t("ccShader_Default_Vert"),o=t("ccShader_Blur_Edge_Detail_Frag");cc.Class({extends:cc.Component,properties:{_xOffset:0,xOffset:{type:cc.Float,get:function(){return this._xOffset},set:function(t){this._xOffset=t}},_yOffset:0,yOffset:{type:cc.Float,get:function(){return this._yOffset},set:function(t){this._yOffset=t}},_strength:1,strength:{type:cc.Float,get:function(){return this._strength},set:function(t){this._strength=t}}},_doSet:function(){this._program?this._program.use():(this._program=new cc.GLProgram,this._program.initWithVertexShaderByteArray(n,o),this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),this._program.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS),this._program.link(),this._uniWidthStep=this._program.getUniformLocationForName("widthStep"),this._uniHeightStep=this._program.getUniformLocationForName("heightStep"),this._uniStrength=this._program.getUniformLocationForName("strength"),this._program.updateUniforms()),this._program.setUniformLocationWith1f(this._uniWidthStep,this.xOffset/this.node.getContentSize().width),this._program.setUniformLocationWith1f(this._uniHeightStep,this.yOffset/this.node.getContentSize().height),this._program.setUniformLocationWith1f(this._uniStrength,this.strength),this._set(this.node._sgNode,this._program)},_set:function(t,e){t.setShaderProgram(e);var i=t.children;if(i)for(var n=0;n<i.length;n++)this._set(i[n],e)}}),cc._RF.pop()},{ccShader_Blur_Edge_Detail_Frag:"ccShader_Blur_Edge_Detail_Frag",ccShader_Default_Vert:"ccShader_Default_Vert"}],1:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,r){e=e||"&",i=i||"=";var c={};if("string"!=typeof t||0===t.length)return c;var s=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var h=t.length;a>0&&h>a&&(h=a);for(var u=0;u<h;++u){var l,d,f,p,g=t[u].replace(s,"%20"),_=g.indexOf(i);_>=0?(l=g.substr(0,_),d=g.substr(_+1)):(l=g,d=""),f=decodeURIComponent(l),p=decodeURIComponent(d),n(c,f)?o(c[f])?c[f].push(p):c[f]=[c[f],p]:c[f]=p}return c};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],2:[function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,s){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?r(c(t),function(c){var s=encodeURIComponent(n(c))+i;return o(t[c])?r(t[c],function(t){return s+encodeURIComponent(n(t))}).join(e):s+encodeURIComponent(n(t[c]))}).join(e):s?encodeURIComponent(n(s))+i+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var c=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],3:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":1,"./encode":2}],CircleButton:[function(t,e,i){"use strict";cc._RF.push(e,"80bc6/PzNlBFaiDqcaJql5b","CircleButton");cc.Class({extends:cc.Component,properties:{EffectLayout:cc.Node,EffectNode:cc.Node},onLoad:function(){},onEnable:function(){var t=this;this.node.active=!0,this.shineEffect(),this.scheduleOnce(function(e){return t.show(!1)},5)},show:function(t){this.node.active=!0,this.node.stopAllActions(),this.node.runAction(cc.fadeTo(1,t?255:60))},shineEffect:function(){var t=this;this.schedule(function(e){var i=cc.instantiate(t.EffectNode);i.parent=t.EffectLayout,i.active=!0,i.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,2,2),cc.fadeTo(.5,0)),cc.callFunc(function(t){return i.destroy()})))},.2,4)}});cc._RF.pop()},{}],ControlPointing:[function(t,e,i){"use strict";cc._RF.push(e,"9723aCIHG9NJ6lkYAhyN504","ControlPointing"),cc.Class({extends:cc.Component,statics:{},properties:{TargetNode:cc.Node,BehavirHandler:[cc.Component.EventHandler]},onLoad:function(){var t=this,e=this.node,i=(cc.Canvas.instance.node,cc.v2(0,0),function(e){(new Date).getTime(),t._isPointing=!1});this._isPointing=!1,this._pointingCount=0,e.on(cc.Node.EventType.TOUCH_START,function(e){(new Date).getTime(),t._isPointing=!0,t._pointingCount=0,EVENT.dispatchNotify("NoifyCancelPointing")}),e.on(cc.Node.EventType.TOUCH_MOVE,function(t){}),e.on(cc.Node.EventType.TOUCH_END,i),e.on(cc.Node.EventType.TOUCH_CANCEL,i)},update:function(){this._isPointing&&(this._pointingCount++,this._pointingCount>60&&(this._isPointing=!1,this.BehavirHandler.forEach(function(t){return t.emit()})))}}),cc._RF.pop()},{}],ControlSlideBookmark:[function(t,e,i){"use strict";cc._RF.push(e,"daaa5doNKZNvYXORgb0Igyp","ControlSlideBookmark"),cc.Class({extends:cc.Component,statics:{},properties:{TargetNode:cc.Node,BehavirHandler:[cc.Component.EventHandler]},onLoad:function(){var t=this,e=this.node,i=cc.Canvas.instance.node,n=this.TargetNode.getPosition(),o=.3*i.width,r=cc.v2(0,0),c=cc.v2(0,0),s=function(e){c=e.touch.getLocation(),t.TargetNode.setPosition(n),t._checkOptionFlip(r.x,c.x,o)&&t.BehavirHandler.forEach(function(t){return t.emit([c])})};e.on(cc.Node.EventType.TOUCH_START,function(t){r=t.touch.getLocation()}),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){var i=e.touch.getDelta();t.TargetNode.x+=i.x}),e.on(cc.Node.EventType.TOUCH_END,s),e.on(cc.Node.EventType.TOUCH_CANCEL,s)},_checkOptionFlip:function(t,e,i){var n=t-e;return n<-i?-1:n>i?1:0},_checkQuickFlip:function(t,e){return t>e?-1:t<-e?1:0},_checkDragDown:function(t,e,i){return 0}}),cc._RF.pop()},{}],ControlSlide:[function(t,e,i){"use strict";cc._RF.push(e,"82d5cJuMNJHTI2EOU+HYeL3","ControlSlide"),cc.Class({extends:cc.Component,statics:{},properties:{TargetNode:cc.Node,BehavirHandler:[cc.Component.EventHandler]},onLoad:function(){var t=this,e=this.node,i=.1*cc.Canvas.instance.node.width,n=cc.v2(0,0),o=cc.v2(0,0),r=function(e){o=e.touch.getLocation(),t._checkOptionFlip(n.x,o.x,i)&&t.BehavirHandler.forEach(function(t){return t.emit()}),t.TargetNode.setPosition(cc.v2(0,0))};e.on(cc.Node.EventType.TOUCH_START,function(t){n=t.touch.getLocation()}),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){var i=e.touch.getDelta();t.TargetNode.x+=i.x,t.TargetNode.y+=i.y}),e.on(cc.Node.EventType.TOUCH_END,r),e.on(cc.Node.EventType.TOUCH_CANCEL,r)},_checkOptionFlip:function(t,e,i){var n=t-e;return n<-i?-1:n>i?1:0},_checkQuickFlip:function(t,e){return t>e?-1:t<-e?1:0},_checkDragDown:function(t,e,i){return 0}}),cc._RF.pop()},{}],DiceDialog:[function(t,e,i){"use strict";cc._RF.push(e,"cca72G9/VBCSoNFPTnTZm8u","DiceDialog"),cc.Class({extends:cc.Component,properties:{ResultLabel:cc.Label},onLoad:function(){},show:function(t,e){this._isDicing=!1,this.node.active=!0,this._event=t,this._makerData=e,this.ResultLabel.string=""},close:function(){this.unscheduleAllCallbacks(),this._event=null,this._makerData=null,this.ResultLabel.string="",this.node.active=!1},_roll:function(){this._isDicing=!0;for(var t=this._makerData.ability[this._event.ability],e=[0,0,1,1,1,2],i=e.length,n=[],o=0;o<t;o++)n.push(e[Math.floor(1e3*Math.random())%i]);return n},clickOnRoll:function(e){var i=this;if(!this._isDicing){var n=this._roll(),o=n.length,r=0;EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.DICE,targets:this._event.targets,describe:this._event.describe,ability:this._event.ability,testValue:n,who:this._makerData.nickname}),this.ResultLabel.string=n[r++],this.schedule(function(t){r<o?i.ResultLabel.string+="+"+n[r]:r==o?i.ResultLabel.string+="="+n.reduce(function(t,e){return t+e}):(i.close(),e&&e()),r++},.5,n.length)}},clickOnCancel:function(){this.node.emit("EmitDiceCancel"),this.close()}}),cc._RF.pop()},{StoryNotifier:"StoryNotifier"}],EditStoryDialog:[function(t,e,i){"use strict";cc._RF.push(e,"857a4O1dxpBaJIAe8ZFbi+r","EditStoryDialog"),cc.Class({extends:cc.Component,properties:{MainEditbox:cc.EditBox,ReplaceEditboxNode:cc.Node,ReplaceEditboxRoot:cc.Node},show:function(t){this.node.active=!0,this.MainEditbox.string="",this.MainEditbox.placeholder=t||""},getParams:function(){return{input:this.MainEditbox.string}},onAddReplaceClicked:function(){var t=cc.instantiate(this.ReplaceEditboxNode);t.parent=this.ReplaceEditboxRoot,t.active=!0},onReplaceClicked:function(){var t=this;this.ReplaceEditboxRoot.children.forEach(function(e){var i=e.getComponent(cc.EditBox).string.split("=");t.MainEditbox.string=t.MainEditbox.string.replace(new RegExp(" "+i[0]+" ","gi"),i[1])})},onClearInputClicked:function(){this.MainEditbox.string="",this.ReplaceEditboxRoot.children.forEach(function(t){return t.destroy})}}),cc._RF.pop()},{}],EventButton:[function(t,e,i){"use strict";cc._RF.push(e,"3b9f3oSTlRIAInX8ry5oL4e","EventButton"),cc.Class({extends:cc.Component,properties:{EventName:cc.Label},setParams:function(t,e){this.EventName.string=t,this._callback=e},onClicked:function(){this._callback&&this._callback()}}),cc._RF.pop()},{}],EventRemover:[function(t,e,i){"use strict";cc._RF.push(e,"dbf92dpeuRHxZDaVSKxCuc/","EventRemover"),cc.Class({extends:cc.Component,addEventParam:function(t){this._registeredEventList=this._registeredEventList?this._registeredEventList.push(t):[t]},onDestroy:function(){this._registeredEventList&&this._registeredEventList.forEach(function(t){EVENT.removeListener(t.name,t.func,t.target)})}}),cc._RF.pop()},{}],FadeInAnimate:[function(t,e,i){"use strict";cc._RF.push(e,"a3c4ad7rDVIgqL0+rfvxWMz","FadeInAnimate"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},action:function(){this.node.setPosition(cc.v2(0,0)),this.node.runAction(cc.scaleTo(.5,32,32))}}),cc._RF.pop()},{}],Firebase2:[function(t,e,i){"use strict";cc._RF.push(e,"f73faK0rdhMi5Px2v6vqYaD","Firebase2");var n={apiKey:"AIzaSyAc5PRwmE14gBH5az8TSoqs9aBrQ8YWa4o",authDomain:"fir-test-756e1.firebaseapp.com",databaseURL:"https://fir-test-756e1.firebaseio.com",projectId:"fir-test-756e1",storageBucket:"fir-test-756e1.appspot.com",messagingSenderId:"182531440628"};cc.Class({ctor:function(){this._database=null,this._promiseBuffer=[],this._dbSetting=n},db:function(){var t=this,e=new Promise(function(e){t._database?e(t._database):t._promiseBuffer.push({resolve:e})});return 1==this._promiseBuffer.length&&cc.loader.load("https://www.gstatic.com/firebasejs/4.2.0/firebase.js",function(e){if(e)return cc.log("firebase error: "+e);t._database=firebase.initializeApp(t._dbSetting).database(),t._promiseBuffer.forEach(function(e){return e.resolve(t._database)}),t._promiseBuffer.length=0}),e},push:function(t,e){return t?this.db().then(function(i){return i.ref(t).push(e).getKey()}):"none_ref"},write:function(t,e){var i=this;return new Promise(function(n,o){t?i.db().then(function(i){return i.ref(t).set(e,function(t){return n({success:null==t})})}):o("none ref")})},remove:function(t){t?this.db().then(function(e){return e.ref(t).remove()}):cc.error("none ref")},read:function(t){var e=this;return new Promise(function(i){e.db().then(function(e){return e.ref(t).once("value",function(t){var e=t.val();i(null!=e?{success:!0,data:e,num:t.numChildren()}:{success:!1})})})})},notify:function(t,e){t?this.db().then(function(i){i.ref(t).set(e),i.ref(t).remove()}):cc.error("none ref")},addListener:function(t,e){this.db().then(function(i){return i.ref(t).on("value",function(t){var i=t.val();e(null!=i?{success:!0,data:i,num:t.numChildren()}:{success:!1})})})},removeListener:function(t){this.db().then(function(e){return e.ref(t).off()})}}),cc._RF.pop()},{}],Firebase:[function(t,e,i){"use strict";cc._RF.push(e,"0e1fcOE9IlEaoIctTXQ6Dl1","Firebase");var n=null,o=[],r=function(){var t=new Promise(function(t){n?t(n):o.push({resolve:t})});return 1==o.length&&cc.loader.load("https://www.gstatic.com/firebasejs/4.2.0/firebase.js",function(t){if(t)return console.log("firebase error: "+t);n=firebase.initializeApp({apiKey:"AIzaSyAc5PRwmE14gBH5az8TSoqs9aBrQ8YWa4o",authDomain:"fir-test-756e1.firebaseapp.com",databaseURL:"https://fir-test-756e1.firebaseio.com",projectId:"fir-test-756e1",storageBucket:"fir-test-756e1.appspot.com",messagingSenderId:"182531440628"}).database(),o.forEach(function(t){t.resolve(n)}),o.length=0}),t};e.exports={record:function(t,e){return new Promise(function(i,n){t?r().then(function(n){i(n.ref(t).push(e).getKey())}):n("none_ref")})},refresh:function(t,e){return new Promise(function(i,n){t?r().then(function(n){n.ref(t).set(e,function(t){i(null==t)})}):n("none ref")})},destroy:function(t){t?r().then(function(e){e.ref(t).remove()}):cc.error("none ref")},remind:function(t,e){t?r().then(function(i){i.ref(t).set(e),i.ref(t).remove()}):cc.error("none ref")},listen:function(t,e){r().then(function(i){i.ref(t).on("value",function(t){var i=t.val(),n=t.numChildren();e(null!=i?{success:!0,data:i,num:n}:{success:!1})})})},check:function(t){return new Promise(function(e){r().then(function(i){i.ref(t).once("value",function(t){var i=t.val(),n=t.numChildren();e(null!=i?{success:!0,data:i,num:n}:{success:!1})})})})},remove:function(t){r().then(function(e){e.ref(t).off()})}},cc._RF.pop()},{}],InputDialog:[function(t,e,i){"use strict";cc._RF.push(e,"68283lF2cpDaagjrZO1/3ze","InputDialog"),cc.Class({extends:cc.Component,properties:{Editbox:cc.EditBox},show:function(t,e){this.node.active=!0,this.Editbox.placeholder=t||"",this.Editbox.string=e||""},addContent:function(t){this.Editbox.string+=" "+t},delContent:function(t){var e=this.Editbox.string;this.Editbox.string=e.substring(0,e.lastIndexOf(t))},getParams:function(){return{input:this.Editbox.string}},onClearInputClicked:function(){this.Editbox.string=""}}),cc._RF.pop()},{}],LetterTyper:[function(t,e,i){"use strict";cc._RF.push(e,"2763eI0bJtG7JqRrytib2/i","LetterTyper"),cc.Class({extends:cc.Component,properties:{LetterField:cc.Node,TargetField:cc.Node,LabelNode:cc.Node,_letter:"",Letter:{set:function(t){this._letter=t,this.LabelNode.getComponent(cc.Label).string=t,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyEventHandler,this)},get:function(){return this._letter}}},onLoad:function(){this._children=[],this._targets=[],this._targetCounters=[],EVENT.addListener("NotifyLuncherLetter",this._luncherLetter.bind(this))},_targetLetter:function(t){var e=this,i=this._instantiateLette(this.TargetField),n=0,o=cc.Canvas.instance.node.height-100,r=o/150;i.color=cc.Color.RED,i.y=o,this._targets.push(i);var c=function(){n++,i.y-=r,150==n&&(i.active=!1,e._targets.shift(),e._targetCounters.shift(),EVENT.dispatchNotify("NotifyCatchMiss",e._letter))};this._targetCounters.push(c),this.schedule(c,.05,150)},_shotLetter:function(){var t=this,e=this._instantiateLette(this.LetterField),i=0,n=(cc.Canvas.instance.node.height-100)/60;e.color=cc.Color.WHITE,e.y=0;this.schedule(function o(){if(e.y+=n,i++,t._targets.length>0){var r=t._targets[0];r.y-e.y<1&&(r.active=!1,t._targets.shift(),e.active=!1,EVENT.dispatchNotify("NotifyGetScore",t._letter),t.unschedule(t._targetCounters.shift(),t),t.unschedule(o,t))}else 60==i&&(e.active=!1,EVENT.dispatchNotify("NotifyWaste",t._letter))},.01,60)},_instantiateLette:function(t){this._children=t.getChildren();var e=this._children.find(function(t){return!t.active})||cc.instantiate(this.LabelNode);return e.parent=t,e.active=!0,e},_luncherLetter:function(t){t==this._letter&&this._targetLetter()},_luncherLetterDelay:function(t){var e=t.letter,i=t.delay;cc.log(e,i),e==this._letter&&(this._hitCallback=this._predictiveHit.bind(this),this.scheduleOnce(this._missedOpportunity,i))},_predictiveHit:function(){this.unschedule(this._missedOpportunity),EVENT.dispatchNotify("NotifyGetScore",this._letter)},_missedOpportunity:function(){this._hitCallback=this._shotLetter.bind(this)},_onKeyEventHandler:function(t){var e="keydown"==t.type,i=t.keyCode;e&&i==cc.macro.KEY[this._letter.toLowerCase()]&&this._shotLetter()},onClick:function(t){this._shotLetter()}}),cc._RF.pop()},{}],Main:[function(t,e,i){"use strict";cc._RF.push(e,"a5039B3CBRIMJxBQ5BVyAgK","Main");var n=null,o=t("PageManager"),r=cc.Class({extends:cc.Component,statics:{getInstance:function(t){return n=n||cc.Canvas.instance.node.getComponent("Main")},editWords:function(t){return r.getInstance().editWords()},normalPlay:function(t){return r.getInstance().normalPlay()}},properties:{EditorButtonNode:cc.Node,WordsEditorNode:cc.Node,PlayButtonNode:cc.Node,BackButtonNode:cc.Node,WordLuncherNode:cc.Node,WordLuncher:t("WordLuncher"),TestNode:cc.Node},onLoad:function(){},start:function(){},_editModeSetting:function(){this.WordsEditorNode.active=this._isEditMode,this.EditorButtonNode.getComponentInChildren(cc.Label).string=this._isEditMode?"Close":"Edit words"},editWords:function(){o.next("WordEditor").then(function(t){cc.log(t)}).catch(function(t){cc.log(t)})},normalPlay:function(){var e=this;o.next("LetterTyper").then(function(i){var n=i.getComponent("WordLuncher");e.scheduleOnce(function(e){var i=JSON.parse(LocalCache.getItem(t("WordsEditor").SHARED_NAME,"{}"));Object.keys(i).sort(function(t){return.5-Math.random()}).forEach(function(t){n.word(t,i[t])}),n.splash()},1)}).catch(function(t){cc.log(t)})},_finish:function(){}});e.exports=r,cc._RF.pop()},{PageManager:"PageManager",WordLuncher:"WordLuncher",WordsEditor:"WordsEditor"}],Notifier2:[function(t,e,i){"use strict";cc._RF.push(e,"82256Cit+xMcLOwbXwXB8sW","Notifier2");var n=new(t("Firebase2")),o="ADeepPrisoner",r=cc.Enum({STORY:-1,JOIN:-1,QUIT:-1,UTTER:-1,BROADCAST:-1,TRADE:-1,CHANGE:-1,TEST:-1,DICE:-1,POLL:-1,VOTE:-1});cc.Class({extends:cc.Component,statics:{type:r,mode:!1,login:function(){return(new Date).getTime()+"_"+Math.floor(1e5*Math.random())}},properties:{StoryTeller:t("StoryTeller"),StoryMakers:[t("StoryMaker")]},onLoad:function(){var e=t("querystring").parse(window.location.search.substring(1),"&","=");this.StoryTeller&&"1"==e.st&&(EVENT.addListener("NotifyStoryTellerEvent",this._notifyStoryTellerEvent,this),n.addListener(o+"/StoryTeller/",this._hostDo.bind(this))),this.StoryMakers&&(EVENT.addListener("NotifyStoryMakerEvent",this._notifyStoryMakerEvent,this),n.addListener(o+"/StoryMaker/",this._userDo.bind(this)))},start:function(){},onDestroy:function(){n.removeListener(o+"/StoryTeller/",this._hostDo.bind(this)),n.removeListener(o+"/StoryMaker/",this._userDo.bind(this))},_hostDo:function(t){var e=this,i=t.success,n=t.data;cc.log(n),i&&Object.keys(n).forEach(function(t){"Notify"==t&&e._hostEventHandler(n[t])})},_userDo:function(t){var e=this,i=t.success,n=t.data;i&&Object.keys(n).forEach(function(t){"Notify"==t&&e._userEventHandler(n[t])})},_notifyStoryTellerEvent:function(t){cc.log(t),t&&n.notify(o+"/StoryTeller/Notify",t)},_notifyStoryMakerEvent:function(t){cc.log(t),t&&n.notify(o+"/StoryMaker/Notify",t)},_hostEventHandler:function(t){var e=this;switch(cc.log("==TELLER==\n",t),t.type){case r.STORY:t.data.reverse().forEach(function(t){return e.StoryTeller.story(t)});break;case r.JOIN:this.StoryTeller.makerJoining(t);break;case r.QUIT:this.StoryTeller.makerQuittfed(t);break;case r.UTTER:this.StoryTeller.utter(t);break;case r.TRADE:this.StoryTeller.trade(t);break;case r.CHANGE:this.StoryTeller.change(t);break;case r.TEST:this.StoryTeller.test(t);break;case r.DICE:this.StoryTeller.resultDice(t);break;case r.POLL:this.StoryTeller.pollVote(t);break;case r.VOTE:this.StoryTeller.resultVote(t)}},_userEventHandler:function(t){switch(cc.log("==MAKER==\n",t),t.type){case r.JOIN:this.StoryMakers.forEach(function(e){return e.makerJoining(t)});break;case r.QUIT:break;case r.BROADCAST:this.StoryMakers.forEach(function(e){return e.print(t)});break;case r.CHANGE:this.StoryMakers.forEach(function(e){return e.change(t)});break;case r.TEST:this.StoryMakers.forEach(function(e){return e.print(t)});break;case r.DICE:this.StoryMakers.forEach(function(e){return e.dice(t)});break;case r.POLL:break;case r.VOTE:this.StoryMakers.forEach(function(e){return e.vote(t)})}}}),cc._RF.pop()},{Firebase2:"Firebase2",StoryMaker:"StoryMaker",StoryTeller:"StoryTeller",querystring:3}],PageLayer:[function(t,e,i){"use strict";cc._RF.push(e,"437cekto69B1owX7cRrgHUv","PageLayer"),cc.Class({extends:cc.Component,statics:{},properties:{},onLoad:function(){var t=cc.Canvas.instance.node.getContentSize();this.node.width=t.width,this.node.height=t.height},clickOnBack:function(){t("PageManager").prev()}}),cc._RF.pop()},{PageManager:"PageManager"}],PageManager:[function(t,e,i){"use strict";cc._RF.push(e,"332895cbp5LObaMNpkfcEDS","PageManager");var n=null,o=[],r=cc.Class({extends:cc.Component,statics:{getInstance:function(){return n=n||cc.Canvas.instance.node.getComponent("PageManager")},next:function(t){return r.getInstance().nextPage(t)},prev:function(){r.getInstance().prevPage()}},properties:{LayerNode:cc.Node},onLoad:function(){o=[]},nextPage:function(t){var e=this;return new Promise(function(i,n){return cc.loader.loadRes("prefabs/"+t,function(t,r){if(t)n(t);else{var c=cc.instantiate(r);c.parent=e.LayerNode;var s=o[o.length-1];s&&(s.active=!1),o.push(c),i(c)}})})},prevPage:function(){var t=o.pop();t&&t.destroy()},headPage:function(){o.forEach(function(t){return t.destroy()}),o=[]}});e.exports=r,cc._RF.pop()},{}],PickerDialog:[function(t,e,i){"use strict";cc._RF.push(e,"886e7L17vhK8ZOcEnJbL7zs","PickerDialog"),cc.Class({extends:cc.Component,properties:{ButtonNode:cc.Node,ButtonRoot:cc.Node},onLoad:function(){},show:function(){this.node.active=!0,cc.log("picker dialog show")},target:function(){},_button:function(t,e){this.ButtonRoot.active=!0;var i=cc.instantiate(this.ButtonNode);i.parent=this.ButtonRoot,i.active=!0,i.y=0,i.getComponent("EventButton").setParams(t,e||this._close.bind(this))}}),cc._RF.pop()},{}],PushDialog:[function(t,e,i){"use strict";cc._RF.push(e,"fd79d0ZhxBOULkdH7Ww20Rx","PushDialog"),cc.Class({extends:cc.Component,properties:{ButtonNode:cc.Node,ButtonRoot:cc.Node,PushRoot:cc.Node},onLoad:function(){},onDisable:function(){this.ButtonRoot.children.forEach(function(t){return t.destroy()})},show:function(t){var e=this;this.node.active=!0,t.forEach(function(t){e._button(e.ButtonNode,e.ButtonRoot,t.name,function(i){e._action("EmitPickit",t.verb),e._push(t.group,t.verb)})})},hide:function(){this.PushRoot.setPosition(this.node.width,0),this.ButtonRoot.setPosition(0,0)},_button:function(t,e,i,n){var o=cc.instantiate(t);o.parent=e,o.active=!0,o.y=0,o.getComponent("EventButton").setParams(i,n)},_push:function(t,e){var i=this;this.PushRoot.children.forEach(function(t){return t.destroy()}),Object.keys(t).forEach(function(e){var n=e+"("+t[e]+")";i._button(i.ButtonNode,i.PushRoot,n,i._action.bind(i,"EmitPickit",e))}),this._button(this.ButtonNode,this.PushRoot,"\u8fd4\u56de",this._action.bind(this,"EmitBack",e)),this.PushRoot.runAction(cc.moveTo(.1,0,0)),this.ButtonRoot.runAction(cc.moveTo(.1,-this.node.width,0))},_pop:function(){this.PushRoot.runAction(cc.moveTo(.1,this.node.width,0)),this.ButtonRoot.runAction(cc.moveTo(.1,0,0))},_action:function(t,e){e&&this.node.emit(t,e),this._pop()}}),cc._RF.pop()},{}],RemovePrompt:[function(t,e,i){"use strict";cc._RF.push(e,"402ecaWkKFE8LJQYxOA1wQF","RemovePrompt"),cc.Class({extends:cc.Component,properties:{Word:cc.Label,RemoveHandler:[cc.Component.EventHandler]},onLoad:function(){var t=this;EVENT.addListener("NoifyCancelPointing",function(e){return t.node.active=!1},this)},indexData:function(t){this.Word.string=t,this._indexData=t},slideOnRemove:function(){this.node.active=!0},clickOnCancel:function(){var t=this;this.node.active=!1,this.RemoveHandler.forEach(function(e){return e.emit([t.node])})},clickOnRemove:function(){var t=this;this.node.active=!1,this.RemoveHandler.forEach(function(e){return e.emit([t.node,t._indexData])})}}),cc._RF.pop()},{}],StoryCard:[function(t,e,i){"use strict";cc._RF.push(e,"2407aBma0lB6JKF/a5ZH4zF","StoryCard");var n=cc.Enum({STORY:-1,RECORD:-1});cc.Class({extends:cc.Component,statics:{type:n},properties:{NameLabel:cc.Label,DescribeLabel:cc.Label},setParam:function(t){var e=t.targets,i=t.names,n=t.describe,o=t.mode;this.NameLabel.string=i?i.join(","):"",this.DescribeLabel.string=n||"",this._eventData={targets:e,names:i,describe:n,mode:o}},onClick:function(){this._eventData.mode==n.STORY&&(EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.UTTER,targets:[],describe:this._eventData.describe}),this.node.active=!1)}}),cc._RF.pop()},{StoryNotifier:"StoryNotifier"}],StoryDialog:[function(t,e,i){"use strict";cc._RF.push(e,"86971/3tetPnpYmAmaOAMRl","StoryDialog"),cc.Class({extends:cc.Component,properties:{CloseButton:cc.Node,MessageDialog:t("TextDialog"),DiceDialog:t("DiceDialog"),PickerDialog:t("PickerDialog"),PushDialog:t("PushDialog"),ChangeDialog:t("InputDialog"),InputDialog:t("InputDialog"),EditStoryDialog:t("EditStoryDialog"),ButtonNode:cc.Node,ButtonRoot:cc.Node},onLoad:function(){this._targets=[],this._include=[],this.PushDialog.node.on("EmitPickit",this._actionButton,this),this.PushDialog.node.on("EmitBack",this._backButton,this)},start:function(){cc.log("\u5225\u5fd8\u8a18\u505a buffer")},editStory:function(){var e=this;this.CloseButton.active=!0,this.node.active=!0,this.EditStoryDialog.show("\u52a0\u5165\u6545\u4e8b"),this._button("\u751f\u6210\u6545\u4e8b\u5361",function(i){e._close();var n=e.EditStoryDialog.getParams();EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.STORY,targets:[],data:n.input.split("\n\n")})})},login:function(e){var i=this;this._makerid=e,this.node.active=!0,this.MessageDialog.show("\u66b1\u7a31"),this.InputDialog.show("\u4f60\u7684\u540d\u5b57\uff1f"),this._button("\u767b\u5165",function(n){i._close();var o=i.InputDialog.getParams();EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.JOIN,targets:[],makerid:e,nickname:o.input})})},logout:function(){},info:function(t,e){if(this.CloseButton.active=!0,-1==this._targets.indexOf(t)&&this._targets.push(t),cc.log("aa",this._targets),this.PushDialog.node.active)this.InputDialog.addContent(e);else{var i=this.node.parent.getComponent("StoryMaker").makersData[t];this.PushDialog.show([{name:"\u884c\u52d5",verb:"\u767c\u52d5",group:i.skill},{name:"\u9053\u5177",verb:"\u4f7f\u7528",group:i.item}]),this.InputDialog.show("\u5beb\u9ede\u4ec0\u9ebc",i.nickname)}this.node.active=!0},utter:function(t,e){cc.log('\u88ab"\u884c\u52d5"\u53d6\u4ee3\u4e86\uff0c\u770b\u9019\u500b\u9084\u8981\u4e0d\u8981\u7559\u4e0b'),this.InputDialog.node.active?(cc.log("??",t,e),this.InputDialog.addContent(e)):(this.MessageDialog.show("\u8acb\u767c\u8a00"),this.InputDialog.show("\u5beb\u9ede\u4ec0\u9ebc",e)),this.node.active=!0},broadcast:function(e){var i=this;this.node.active=!0,this.InputDialog.show("\u5ee3\u64ad\u5167\u5bb9",e.describe),this._button("\u5ee3\u64ad",function(n){i._close(),EVENT.dispatchNotify("NotifyStoryMakerEvent",{type:t("StoryNotifier").type.BROADCAST,targets:e.targets||[],describe:e.describe}),i._targets=[],i._include=[]})},trade:function(){this.node.active=!0,cc.log("\u958b\u555ftrade dialog")},change:function(e){var i=this;this.node.active=!0;var n=e.include[0];this.MessageDialog.show(e.describe),this.ChangeDialog.show("\u4fee\u6539\u6578\u503c"+e.num+"\u2192",e.num),this._button("\u4fee\u6539",function(o){i._close(),EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.CHANGE,targets:e.targets,describe:e.describe,propty:e.propty,change:n+"="+i.ChangeDialog.getParams().input})})},test:function(e){var i=this;this.node.active=!0,this.MessageDialog.show(e.describe);var n=function(n){i._button(n,function(o){i._close(),EVENT.dispatchNotify("NotifyStoryMakerEvent",{type:t("StoryNotifier").type.DICE,targets:e.targets,describe:e.describe,ability:n})})};n("\u529b\u91cf"),n("\u654f\u6377"),n("\u667a\u6167"),n("\u7cbe\u795e")},dice:function(t,e){var i=this;this.node.active=!0,this.MessageDialog.show(t.describe+"\n\u60a8\u53ef\u4ee5\u7528("+t.ability+"\u5c6c\u6027)"+e.ability[t.ability]+"\u7c92\u9ab0\u5b50\u9032\u884c\u64f2\u9ab0"),this.DiceDialog.show(t,e),this._button("\u64f2\u9ab0",function(t){i.DiceDialog.clickOnRoll(i._close.bind(i))})},_actionButton:function(e){var i=this;switch(this.InputDialog.addContent(e),e){case"\u8868\u793a":cc.log("\u76ee\u524d\u6c92\u6709\u7528\u5230"),this._button("\u767c\u8a00",function(e){i._close();var n=i.InputDialog.getParams();EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.UTTER,targets:[i._makerid],describe:n.input}),i._targets=[],i._include=[]});break;case"\u767c\u52d5":this._button("\u6aa2\u5b9a",function(e){i._close();var n=i.InputDialog.getParams();EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.TEST,targets:i._targets,describe:n.input,propty:"skill",include:i._include}),i._targets=[],i._include=[]});break;case"\u4f7f\u7528":this._button("\u4f7f\u7528",function(e){i._close();var n=i.InputDialog.getParams();EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.TRADE,targets:[i._targets[0]],describe:n.input,propty:"item",include:[n.input.split("\u4f7f\u7528 ")[1]]}),i._include=[]});break;case"\u6295\u7968":this._button("\u6295\u7968",function(e){i._close();var n=i.InputDialog.getParams();EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.POLL,targets:[i._makerid],describe:n.input}),i._targets=[]})}},_backButton:function(t){this.ButtonRoot.children.forEach(function(t){return t.destroy()}),this.InputDialog.delContent(t)},_button:function(t,e){this.ButtonRoot.active=!0;var i=cc.instantiate(this.ButtonNode);i.parent=this.ButtonRoot,i.active=!0,i.y=0,i.getComponent("EventButton").setParams(t,e||this._close.bind(this))},_close:function(){this.PushDialog.node.active&&this.PushDialog.hide(),this.ButtonRoot.children.forEach(function(t){return t.destroy()}),this.node.children.forEach(function(t){return t.active=!1}),this.node.active=!1},onCloseClicked:function(){this._targets=[],this._include=[],this._close()}}),cc._RF.pop()},{DiceDialog:"DiceDialog",EditStoryDialog:"EditStoryDialog",InputDialog:"InputDialog",PickerDialog:"PickerDialog",PushDialog:"PushDialog",StoryNotifier:"StoryNotifier",TextDialog:"TextDialog"}],StoryMakerData:[function(t,e,i){"use strict";cc._RF.push(e,"d4983pOpwJA+bkJTjjbF6NJ","StoryMakerData"),cc.Class({ctor:function(){this.makerid=0,this.nickname="",this.ability={"\u529b\u91cf":0,"\u654f\u6377":0,"\u667a\u6167":0,"\u7cbe\u795e":0},this.skill={"\u4ea4\u6d89":1,"\u89c0\u5bdf":1,"\u64bf\u62fe":1},this.item={"\u6a9c\u6728\u786c\u5e63":1}},randomAbility:function(){var t=[3,3,2,1].sort(function(t){return Math.random()-.5});this.ability={"\u529b\u91cf":t[0],"\u654f\u6377":t[1],"\u667a\u6167":t[2],"\u7cbe\u795e":t[3]}}}),cc._RF.pop()},{}],StoryMakerInfo:[function(t,e,i){"use strict";cc._RF.push(e,"449eaJ7jZZM05hAroneG6Xg","StoryMakerInfo"),cc.Class({extends:cc.Component,properties:{NameLabel:cc.Label,Dialog:t("StoryDialog")},setParams:function(t){var e=t.makerid,i=t.nickname;this._makerid=e,this._nickname=i,this.NameLabel.string=i},onNotifyInfoClicked:function(){this.Dialog.info(this._makerid,this._nickname)}}),cc._RF.pop()},{StoryDialog:"StoryDialog"}],StoryMaker:[function(t,e,i){"use strict";cc._RF.push(e,"8ff79G174FJh42xPwTnEX77","StoryMaker");t("StoryMakerData");cc.Class({extends:cc.Component,properties:{StoryCardItem:cc.Node,StoryCardRoot:cc.Node,StoryMakersItem:cc.Node,StoryMakersRoot:cc.Node,ScrollView:cc.ScrollView,MakerInfo:t("StoryMakerInfo"),Dialog:t("StoryDialog")},onLoad:function(){this._makerid="",this._makersData=void 0,this.makerData=void 0},start:function(){this.Dialog.login(this._makerid=t("Notifier2").login())},makerJoining:function(t){var e=this;this._makersData=t.data,this.makersData=t.data;var i=this.StoryMakersRoot.getChildren();i.forEach(function(t){return t.active=!1}),Object.keys(this._makersData).forEach(function(t,n){if(t!=e._makerid){var o=e._makersData[t],r=i[n]||cc.instantiate(e.StoryMakersItem);r.active=!0,r.parent=e.StoryMakersRoot,r.setPosition(0,-30),r.getComponent("StoryMakerInfo").setParams(o)}}),this._chekMe(t.targets)&&(this.makerData=this._makersData[this._makerid],this.MakerInfo.setParams(this.makerData)),this.print(t)},print:function(e){var i=this,n=(e.type,e.targets),o=e.describe,r=n?n.map(function(t){return i._makersData[t].nickname}):"",c=t("StoryCard").type,s=cc.instantiate(this.StoryCardItem);s.parent=this.StoryCardRoot,s.active=!0,s.getComponent("StoryCard").setParam({targets:n,names:r,describe:o,mode:c.RECORD}),this.ScrollView.scrollToBottom()},change:function(t){if(this.print(t),this._chekMe(t.targets)){var e=t.propty,i=t.change,n=i.split("=");this.makerData[e][n[0]]=n[1]}},dice:function(t){if(this._chekMe(t.targets)){var e=this._makersData[this._makerid];cc.log("-----\x3e",e),this.Dialog.dice(t,e)}},vote:function(t){var e=t.type,i=t.targets,n=t.describe,o=t.votes;if(this._chekMe(i)){this._log(n,"\n\u6295",2),EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:e,targets:i,describe:n,votes:o,choice:2})}},_chekMe:function(t){var e=this;return cc.log(t,"\u627e",this._makerid),t.some(function(t){return t==e._makerid})},_log:function(){cc.log("<============Maker:",this.node.name);for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];cc.log(JSON.stringify(e.join(" "))),cc.log("Maker============>")},clickOnBrocast:function(){EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.BROADCAST,targets:[this._makerid],describe:"\u8a66\u8a66 broadcast"})},clickOnChange:function(){EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.CHANGE,targets:[this._makerid],change:"\u529b\u91cf=10",describe:"\u8a66\u8a66 change"})},clickOnTest:function(){EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.TEST,targets:[this._makerid],ability:"\u529b\u91cf",describe:"\u8a66\u8a66 test"})},clickOnVote:function(){EVENT.dispatchNotify("NotifyStoryTellerEvent",{type:t("StoryNotifier").type.VOTE,targets:[this._makerid],votes:["vote_1","vote_2","vote_3"],describe:"\u8a66\u8a66 vote"})}}),cc._RF.pop()},{Notifier2:"Notifier2",StoryCard:"StoryCard",StoryDialog:"StoryDialog",StoryMakerData:"StoryMakerData",StoryMakerInfo:"StoryMakerInfo",StoryNotifier:"StoryNotifier"}],StoryNotifier:[function(t,e,i){"use strict";cc._RF.push(e,"6065cYjSrlI9qHnhOKztaVb","StoryNotifier");var n=cc.Enum({STORY:-1,JOIN:-1,QUIT:-1,UTTER:-1,BROADCAST:-1,TRADE:-1,CHANGE:-1,TEST:-1,DICE:-1,POLL:-1,VOTE:-1});cc.Class({extends:cc.Component,statics:{type:n},properties:{StoryTeller:t("StoryTeller"),StoryMakers:[t("StoryMaker")]},onLoad:function(){this.StoryTeller&&EVENT.addListener("NotifyStoryTellerEvent",this._notifyStoryTellerEvent,this),this.StoryMakers&&EVENT.addListener("NotifyStoryMakerEvent",this._notifyStoryMakerEvent,this)},_notifyStoryTellerEvent:function(t){var e=this;switch(cc.log("==TELLER==\n",t),t.type){case n.STORY:[1,2,3,4].reverse().forEach(function(t){return e.StoryTeller.story(t)});break;case n.JOIN:this.StoryTeller.makerJoining(t);break;case n.QUIT:this.StoryTeller.makerQuittfed(t);break;case n.UTTER:this.StoryTeller.utter(t);break;case n.TRADE:this.StoryTeller.trade(t);break;case n.CHANGE:this.StoryTeller.change(t);break;case n.TEST:this.StoryTeller.test(t);break;case n.DICE:this.StoryTeller.resultDice(t);break;case n.POLL:this.StoryTeller.pollVote(t);break;case n.VOTE:this.StoryTeller.resultVote(t)}},_notifyStoryMakerEvent:function(t){switch(cc.log("==MAKER==\n",t),t.type){case n.JOIN:this.StoryMakers.forEach(function(e){return e.makerJoining(t)});break;case n.QUIT:break;case n.BROADCAST:this.StoryMakers.forEach(function(e){return e.print(t)});break;case n.CHANGE:this.StoryMakers.forEach(function(e){return e.change(t)});break;case n.TEST:this.StoryMakers.forEach(function(e){return e.print(t)});break;case n.DICE:this.StoryMakers.forEach(function(e){return e.dice(t)});break;case n.POLL:break;case n.VOTE:this.StoryMakers.forEach(function(e){return e.vote(t)})}}}),cc._RF.pop()},{StoryMaker:"StoryMaker",StoryTeller:"StoryTeller"}],StoryTeller:[function(t,e,i){"use strict";cc._RF.push(e,"a77b9h5VUFKn7z1MQrvgtAm","StoryTeller");var n=t("StoryMakerData");cc.Class({extends:cc.Component,properties:{StoryCardItem:cc.Node,StoryCardRoot:cc.Node,Dialog:t("StoryDialog")},onLoad:function(){this._makers={}},start:function(){},story:function(e){var i=t("StoryCard").type,n=cc.instantiate(this.StoryCardItem);n.parent=this.StoryCardRoot,n.active=!0,n.getComponent("StoryCard").setParam({targets:[],names:["Story teller"],describe:e,mode:i.STORY})},makerJoining:function(t){var e=this,i=t.type,o=t.makerid,r=t.nickname,c=new n;c.makerid=o,c.nickname=r,c.randomAbility(),this._makers[o]=c;var s={};Object.keys(this._makers).map(function(t){var i=e._makers[t];s[t]={makerid:t,nickname:i.nickname}}),EVENT.dispatchNotify("NotifyStoryMakerEvent",{type:i,targets:[o],data:this._makers,describe:"\u6b61\u8fce "+r+" \u52a0\u5165"})},utter:function(t){this.Dialog.broadcast(t)},broadcast:function(t){EVENT.dispatchNotify("NotifyStoryMakerEvent",t)},trade:function(t){var e=this._makers[t.targets[0]];t.num=e[t.propty][t.include[0]],this.Dialog.change(t)},change:function(t){var e=t.targets,i=t.propty,n=t.change,o=n.split("=");this._makers[e[0]][i][o[0]]=o[1],this.broadcast(t)},test:function(t){this._testResultCount=0,this.Dialog.test(t),this.broadcast(t)},resultDice:function(e){e.type;var i=e.targets,n=(e.describe,e.ability,e.testValue),o=e.who;this._testResultCount++;var r=i.length==this._testResultCount;this.broadcast({type:t("StoryNotifier").type.BROADCAST,targets:[],describe:o+"\u6aa2\u5b9a\u7d50\u679c\u70ba "+n.reduce(function(t,e){return t+e})}),r&&this.broadcast({type:t("StoryNotifier").type.BROADCAST,targets:[],describe:"===\u64f2\u9ab0\u7d50\u675f==="})},pollVote:function(t){var e=t.type,i=t.targets,n=t.describe,o=t.votes;this._voteResultCount=0,this._voteBox=[],this._log(n,"\n\u8acb\u6295\u7968",o),EVENT.dispatchNotify("NotifyStoryMakerEvent",{type:e,targets:i,describe:n,votes:o})},resultVote:function(e){e.type;var i=e.targets,n=(e.describe,e.votes),o=e.choice;this._voteResultCount++,this._voteBox.push(o);var r=i.length==this._voteResultCount;this._log("\u958b\u7968\uff1a\u5f97\u4e00\u7968",o);var c=this._voteBox.sort(function(t,e){return t-e}),s=c[0];r&&this.broadcast({type:t("StoryNotifier").type.BROADCAST,targets:i,describe:"\u6295\u7968\u7d50\u679c\u70ba "+c+"\uff0c"+n[s]+"\u7372\u52dd"})},_log:function(){cc.log("<============Teller:",this.node.name);for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];cc.log(JSON.stringify(e.join(" "))),cc.log("Teller============>")},onEditStoryClicked:function(){this.Dialog.editStory()}}),cc._RF.pop()},{StoryCard:"StoryCard",StoryDialog:"StoryDialog",StoryMakerData:"StoryMakerData",StoryNotifier:"StoryNotifier"}],TextDialog:[function(t,e,i){"use strict";cc._RF.push(e,"970e7GhNQtAhKr7FxeGEbKf","TextDialog"),cc.Class({extends:cc.Component,properties:{Label:cc.Label},onLoad:function(){},show:function(t){this.node.active=!0,this.Label.string=t},addContent:function(t){this.Label.string+=t},nextContent:function(t){this.Label.string+="\n"+t}}),cc._RF.pop()},{}],TranslateLayer:[function(t,e,i){"use strict";cc._RF.push(e,"516efq9MrVI3bdt2hgYDbw3","TranslateLayer");var n=t("Main");cc.Class({extends:cc.Component,statics:{},properties:{},onLoad:function(){},slideOnLetterType:function(){n.normalPlay()},slideOnWordEditor:function(){n.editWords()}}),cc._RF.pop()},{Main:"Main"}],UtterDialog:[function(t,e,i){"use strict";cc._RF.push(e,"96965ps5X5HwIxu6jOHvseV","UtterDialog"),cc.Class({extends:cc.Component,properties:{Input:cc.EditBox},onLoad:function(){},show:function(t){this.node.active=!0,this.Input.string=t},addContent:function(t){this.Input.string+=t},getParams:function(){return{message:this.Input.string}}}),cc._RF.pop()},{}],VirtualKeyboard:[function(t,e,i){"use strict";cc._RF.push(e,"f480cO4fstLuKE020Qvq9Fb","VirtualKeyboard");var n=["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"];cc.Class({extends:cc.Component,statics:{letters:n},properties:{KeyButtonNode:cc.Node},start:function(){this._setLayer(10,9,7),this._setLetters(n)},_setLayer:function(){for(var t=cc.Canvas.instance.node.width,e=this.node.height,i=.5*t,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var c=t/o.sort(function(t,e){return e-t})[0];this.KeyButtonNode.width=c-6;for(var s=.99*e-.5*this.KeyButtonNode.height,a=.5*c,h=0;h<o[0];h++){(d=this._newButton()).x=c*h+a-i,d.y=s}s=.66*e-.5*this.KeyButtonNode.height,a=1*c;for(var u=0;u<o[1];u++){(d=this._newButton()).x=c*u+a-i,d.y=s}s=.33*e-.5*this.KeyButtonNode.height,a=2*c;for(var l=0;l<o[2];l++){var d;(d=this._newButton()).x=c*l+a-i,d.y=s}},_newButton:function(){var t=cc.instantiate(this.KeyButtonNode);return t.parent=this.node,t.active=!0,t},_setLetters:function(t){var e=this.node.getChildren();t.forEach(function(t,i){e[i].getComponent("LetterTyper").Letter=t})}}),cc._RF.pop()},{}],WordLuncher:[function(t,e,i){"use strict";cc._RF.push(e,"48720k9nwtEwKGq7XPP9DKx","WordLuncher");cc.Class({extends:cc.Component,properties:{PromptLabel:cc.RichText,ScoreLabel:cc.RichText,HittingLabel:cc.RichText,FadeInAnimate:t("FadeInAnimate")},onLoad:function(){var t=this;this.FadeInAnimate.action(),this._score=0,this._interval=.8,this._targetList=[{content:["A","B","C"],length:"ABC".length,en:"ABC",ch:"\u3105\u3106\u3107"}],this._targetList.shift(),this._curIndex=0,this.ScoreLabel.string="0",EVENT.addListener("NotifyGetScore",function(e){var i=t._targetList[t._curIndex].content;i.find(function(t,n){var o=t==e;return o&&i.splice(n,1),o}),t._earnCount++,t.HittingLabel.string+=e,t._checkedStr+=e,t._checkComplete()},this),EVENT.addListener("NotifyCatchMiss",function(e){t._missCount++,t.HittingLabel.string+="<color=#ff1100>"+e+"</c>",t._checkComplete()},this),EVENT.addListener("NotifyWaste",function(e){t.HittingLabel.string+=e,t._wasteCount++},this),this._initCounter()},interval:function(t){this._interval=t||this._interval},word:function(t,e){var i=(t=t.toUpperCase()).split("");this._targetList.push({content:i,length:i.length,en:t,ch:e||"\u4e2d\u6587"})},splash:function(){var t=this,e=this._targetList[0];e.content.forEach(function(e,i){t.scheduleOnce(function(t){EVENT.dispatchNotify("NotifyLuncherLetter",e)},i*t._interval)}),this._initCounter(),this.PromptLabel.string=e.ch},_initCounter:function(){this.HittingLabel.string="",this.PromptLabel.string="",this._checkedStr="",this._counter=0,this._earnCount=0,this._missCount=0,this._wasteCount=0},_checkComplete:function(){var t=this,e=this._targetList[this._curIndex];if(++this._counter==e.length){cc.log("end"),this._targetList.shift(),cc.log(e.length==this._earnCount?"succeed":"failt"),cc.log("miss",this._missCount,"times"),cc.log("waste",this._wasteCount,"times");var i=e.length==this._earnCount?2:1,n=this._wasteCount>0?Math.min(1,this._wasteCount/e.length):0;i-=n,cc.log("mult",i,"wasteRate",n);var o=0;this.HittingLabel.string="",e.en.split("").forEach(function(e,i){t._checkedStr[i]==e?t.HittingLabel.string+="<color=#57ff31>"+e+"</c>":(t.HittingLabel.string+="<color=#ff1100>"+e+"</c>",o++)}),cc.log("wrong sort",o,"times"),this._score+=Math.max(0,Math.round((this._earnCount-this._missCount-o)*i)),this.ScoreLabel.string=this._score.toString(),cc.log(this.ScoreLabel.string),this._targetList.length>0?this.scheduleOnce(this.splash,1.5):this.scheduleOnce(function(e){t._initCounter(),t._cacheData(t._score),EVENT.dispatchNotify("NotifyFinish",t._score),t._score=0},1.5)}cc.log("hit times: ",this._counter)},_cacheData:function(t){var e=LocalCache.getItem("save_heigh_score_data",'{"heigh_score":0,"previous_score":0}'),i=JSON.parse(e),n=i.heigh_score,o=i.previous_score,r={heigh_score:0,previous_score:t};this.ScoreLabel.string=t>o?"<color=#11ff00>"+t+"\u2b9d</color>":t<o?"<color=#ff0000>"+t+"\u2b9f</color>":t,t>n?(this.ScoreLabel.string+="/<color=#11ff00>"+t+"\u2b9d</color>",r.heigh_score=t):this.ScoreLabel.string+="/"+n,LocalCache.setItem("save_heigh_score_data",JSON.stringify(r))},_removeData:function(){LocalCache.setItem("save_heigh_score_data",'{"heigh_score":0,"previous_score":0}')},_checkSpelling:function(t){}}),cc._RF.pop()},{FadeInAnimate:"FadeInAnimate"}],WordsEditor:[function(t,e,i){"use strict";cc._RF.push(e,"2c745HDveRBfrQ+PwkUQdzB","WordsEditor");var n="word_data_list";cc.Class({extends:cc.Component,statics:{SHARED_NAME:n},properties:{EditPanelNode:cc.Node,EnglishInput:cc.EditBox,ChineseInput:cc.EditBox,ListLayout:cc.Node,WordItem:cc.Node,FadeInAnimate:t("FadeInAnimate")},onLoad:function(){var t=this;this.FadeInAnimate.action();var e=JSON.parse(LocalCache.getItem(n,"{}"));Object.keys(e).forEach(function(i){t._addItem(i,e[i])})},removeHandler:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0].parent,o=e[1];o&&(n.active=!1,this._removeData(o))},_addItem:function(t,e){var i=cc.instantiate(this.WordItem);i.parent=this.ListLayout,i.active=!0;var n=i.getComponentsInChildren(cc.Label);n[0].string=t,n[1].string=e,i.getComponentInChildren("RemovePrompt").indexData(t)},_resetData:function(){LocalCache.removeItem(n)},_cacheData:function(t,e){var i=JSON.parse(LocalCache.getItem(n,"{}"));i=Object.assign(i,function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},t,e)),LocalCache.setItem(n,JSON.stringify(i))},_removeData:function(t){var e=JSON.parse(LocalCache.getItem(n,"{}"));delete e[t],LocalCache.setItem(n,JSON.stringify(e))},clickOnAdd:function(){this.EditPanelNode.active=!0,this.EnglishInput.string="",this.ChineseInput.string=""},clickOnSave:function(){var t=this.EnglishInput.string,e=this.ChineseInput.string;return t?e?(this._addItem(t,e),this._cacheData(t,e),void(this.EditPanelNode.active=!1)):cc.error("no chinese"):cc.error("no english")}}),cc._RF.pop()},{FadeInAnimate:"FadeInAnimate"}],ccShader_Blur_Edge_Detail_Frag:[function(t,e,i){"use strict";cc._RF.push(e,"780d5pGvzVPmYPgpMpQA0bm","ccShader_Blur_Edge_Detail_Frag"),e.exports="\n#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 v_texCoord;\nuniform float widthStep;\nuniform float heightStep;\nuniform float strength;\nconst float blurRadius = 2.0;\nconst float blurPixels = (blurRadius * 2.0 + 1.0) * (blurRadius * 2.0 + 1.0);\nvoid main()\n{\n    vec3 sumColor = vec3(0.0, 0.0, 0.0);\n    \n    for(float fy = -blurRadius; fy <= blurRadius; ++fy)\n    {\n        for(float fx = -blurRadius; fx <= blurRadius; ++fx)\n        {\n            vec2 coord = vec2(fx * widthStep, fy * heightStep);\n            sumColor += texture2D(CC_Texture0, v_texCoord + coord).rgb;\n        }\n    }\n    gl_FragColor = vec4(mix(texture2D(CC_Texture0, v_texCoord).rgb, sumColor / blurPixels, strength), texture2D(CC_Texture0, v_texCoord).w);\n}\n",cc._RF.pop()},{}],ccShader_Default_Vert:[function(t,e,i){"use strict";cc._RF.push(e,"94993AdTvBG46GxgaVXs3aW","ccShader_Default_Vert"),e.exports="\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_fragmentColor;\nvoid main()\n{\ngl_Position = CC_PMatrix * a_position;\nv_fragmentColor = a_color;\nv_texCoord = a_texCoord;\n}\n",cc._RF.pop()},{}]},{},["LetterTyper","Main","PageManager","RemovePrompt","WordLuncher","Firebase","Firebase2","Notifier2","DiceDialog","EditStoryDialog","InputDialog","PickerDialog","PushDialog","StoryDialog","TextDialog","UtterDialog","Blur","ccShader_Blur_Edge_Detail_Frag","ccShader_Default_Vert","StoryCard","StoryMaker","StoryMakerData","StoryMakerInfo","StoryNotifier","StoryTeller","ControlPointing","ControlSlide","ControlSlideBookmark","EventButton","EventRemover","VirtualKeyboard","WordsEditor","CircleButton","FadeInAnimate","PageLayer","TranslateLayer"]);